<% include ../partials/header %>

<div class="container">

    <div class="row">
        <h1 class="text-center">
            <%= poll.title %>
            <p class="lead text-muted">by <%= poll.author.username %></p>
        </h1>
        <hr>
    </div>

    <div class="row">
        <div class="col-md-4">

            <h2 class="text-center">Vote</h2>
            <hr>

            <form action="/polls/<%= poll._id %>/vote" method="post">
                <div class="form-group">
                    <select class="form-control input-lg" name="vote" required>
                        <option value="" disabled="disabled" selected="selected" hidden>Choose an option... </option>
                        <% poll.options.forEach(option => { %>
                            <option value="<%= option._id %>"><%= option.description %></option>
                        <% });%>
                    </select>
                </div>

                <div class="form-group">
                    <button type="submit" class="btn btn-lg btn-block btn-primary">Vote</button>
                </div>
            </form>
        
        </div>

        <div class="col-md-6 col-md-offset-2">

            <h2 class="text-center">Results</h2>
            <hr>
        
            <div id="chart"></div>
        
        </div>
    </div>

</div>

<%- include('../partials/footer', { script: 'poll-results' }) %>